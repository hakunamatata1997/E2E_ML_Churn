schema: '2.0'
stages:
  raw_dataset_creation:
    cmd: python3 ./src/data/load_data.py --config=params.yaml
    deps:
    - path: ./data/external/Churn_Prediction.csv
      md5: 7321aa9a1e24a9e139f42124f736b415
      size: 674857
    - path: ./src/data/load_data.py
      md5: 4a43bd22a142c77f117b6dde8e3451fc
      size: 1314
    outs:
    - path: ./data/raw/Churn_Prediction.csv
      md5: d9534fcf204e37ae58a7d7313ce4659c
      size: 469203
  preprocess:
    cmd: python3 ./src/data/preprocess.py --config=params.yaml
    deps:
    - path: ./data/raw/Churn_Prediction.csv
      md5: d9534fcf204e37ae58a7d7313ce4659c
      size: 469203
    - path: ./src/data/preprocess.py
      md5: 8eb8bd0424341b8cb118711a408c5313
      size: 1533
    outs:
    - path: ./data/processed/processed_data.csv
      md5: 487733dd81bed7f60072fc7a803fbf8f
      size: 400114
  split_data:
    cmd: python3 ./src/data/split_data.py --config=params.yaml
    deps:
    - path: ./data/processed/processed_data.csv
      md5: 487733dd81bed7f60072fc7a803fbf8f
      size: 400114
    - path: ./src/data/split_data.py
      md5: f6191b05190b1b8e5bf4e4f6f96f679f
      size: 1451
    outs:
    - path: ./data/processed/churn_test.csv
      md5: 0fc6853dea827712941c41c40d564d1f
      size: 80121
    - path: ./data/processed/churn_train.csv
      md5: c900296636fd3eb243a0d938c80750d7
      size: 320132
  optimize:
    cmd: python3 ./src/models/optimization.py --config=params.yaml
    deps:
    - path: ./data/processed/churn_test.csv
      md5: 0fc6853dea827712941c41c40d564d1f
      size: 80121
    - path: ./data/processed/churn_train.csv
      md5: c900296636fd3eb243a0d938c80750d7
      size: 320132
    - path: ./src/models/optimization.py
      md5: dfab5eed18464dab017e005a51ece58e
      size: 3163
  log_production_model:
    cmd: python ./src/models/model_selection.py --config=params.yaml
    deps:
    - path: ./src/models/model_selection.py
      md5: 0a18a6e8dba4fad3f7ab95008c8327e2
      size: 1993
    params:
      params.yaml:
        random_forest.max_depth: 11.18380491768251
        random_forest.n_estimators: 11
    outs:
    - path: ./models/model.joblib
      md5: 469a323be44e87f1c0472483a263a163
      size: 1260384
  model_train:
    cmd: python3 ./src/models/train_model.py --config=params.yaml
    deps:
    - path: ./src/models/train_model.py
      md5: 7024d43482e79192c84c0479f6874e8e
      size: 3762
    params:
      params.yaml:
        random_forest.max_depth: 6
        random_forest.n_estimators: 10
  monitor_model:
    cmd: python3 ./src/models/model_monitor.py --config=params.yaml
    deps:
    - path: ./data/raw/train_new.csv
      md5: 9438be80f4c91ec18a7f6e31ebb1ac60
      size: 67387
    - path: ./src/models/model_monitor.py
      md5: b6cabfb57942fbca0abd76623b4b5166
      size: 1487
    outs:
    - path: ./reports/templates/data_and_target_drift_dashboard.html
      md5: 25d98096cb03d4f6ee6f7a72cb26425b
      size: 4044318
